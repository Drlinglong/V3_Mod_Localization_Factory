# 校对进度追踪功能说明

## 功能概述

校对进度追踪功能是V3_Mod_Localization_Factory项目的一个新增模块，旨在帮助汉化者更好地管理和追踪大型Mod汉化项目的校对进度。

## 主要特性

### 1. 自动生成校对进度看板
- 在所有翻译任务完成后，自动生成 `proofreading_progress.md` 文件
- 文件生成在汉化成果文件夹的根目录下
- 无需手动配置，完全自动化

### 2. 智能文件信息收集
- 自动记录每个源文件和对应的汉化文件路径
- 统计每个文件中实际被翻译的文本行数
- 区分普通本地化文件和自定义本地化文件
- 包含fallback文件的信息

### 3. 结构化进度表格
- 使用Markdown表格格式，清晰易读
- 包含状态复选框、源文件、汉化文件、翻译行数、备注等列
- 按文件路径自动排序，便于查找

### 4. 用户友好的交互设计
- 可点击的复选框，支持标记完成状态
- 备注列支持手动填写校对进度信息
- 包含详细的使用说明和校对建议

## 技术实现

### 核心模块
- `scripts/core/proofreading_tracker.py` - 校对进度追踪器核心类
- 集成到 `scripts/workflows/initial_translate.py` 工作流中

### 工作流程
1. 工作流开始时初始化校对进度追踪器
2. 处理每个文件时收集相关信息（源路径、目标路径、翻译行数等）
3. 所有翻译任务完成后自动生成进度看板
4. 保存为 `proofreading_progress.md` 文件

### 数据收集
- 正常翻译文件：记录源文件、目标文件、翻译行数
- Fallback文件：记录文件信息，翻译行数标记为0
- 支持多种文件类型：`.yml` 和 `.txt` 文件

## 使用方法

### 自动生成
1. 运行正常的翻译工作流
2. 翻译完成后，系统自动在输出目录生成 `proofreading_progress.md`
3. 无需额外配置或操作

### 手动编辑
1. 在GitHub或本地Markdown编辑器中打开文件
2. 点击复选框标记完成状态：`[ ]` → `[x]`
3. 在备注列填写校对进度信息
4. 保存文件，进度信息自动更新

### 进度追踪示例
```
| 状态 | 源文件 | 汉化文件 | 已翻译行数 | 校对进度/备注 |
| :--: | :--- | :--- | :---: | :--- |
| [x] | `events_l_english.yml` | `events_l_simp_chinese.yml` | 648 | 已完成 |
| [ ] | `decisions_l_english.yml` | `decisions_l_simp_chinese.yml` | 85 | 校对到50行 |
| [ ] | `interface_l_english.yml` | `interface_l_simp_chinese.yml` | 42 | 风格待统一 |
```

## 文件结构

```
汉化-Mod名称/
├── localisation/
│   └── simp_chinese/
│       ├── events_l_simp_chinese.yml
│       ├── decisions_l_simp_chinese.yml
│       └── ...
├── customizable_localization/
│   └── simp_chinese/
│       ├── names.txt
│       └── descriptions.txt
├── proofreading_progress.md  ← 校对进度看板
└── ...
```

## 配置选项

### 文件命名
- 默认文件名：`proofreading_progress.md`
- 位置：汉化成果文件夹根目录
- 编码：UTF-8

### 表格列配置
- 状态列：支持复选框交互
- 源文件列：显示相对路径
- 汉化文件列：显示相对路径
- 翻译行数列：数字统计
- 备注列：支持自由文本输入

## 优势特点

### 1. 提升工作效率
- 自动生成，无需手动创建
- 清晰的进度可视化
- 支持批量操作和状态管理

### 2. 促进团队协作
- 标准化的进度追踪格式
- 支持多人同时编辑
- 版本控制友好

### 3. 质量保证
- 完整的文件覆盖记录
- 翻译行数统计，便于工作量评估
- 支持校对进度备注，记录问题和解决方案

### 4. 工作流集成
- 无缝集成到现有翻译流程
- 不影响翻译性能
- 自动触发，无需额外操作

## 注意事项

### 1. 文件依赖
- 依赖 `initial_translate.py` 工作流
- 需要正确的文件路径配置
- 确保输出目录有写入权限

### 2. 数据准确性
- 翻译行数基于实际提取的文本计算
- 空文件或fallback文件行数标记为0
- 路径信息基于相对路径显示

### 3. 兼容性
- 支持所有游戏类型（Victoria 3, Stellaris, EU4, HOI4, CK3）
- 支持多语言翻译模式
- 兼容现有的fallback机制

## 未来扩展

### 1. 功能增强
- 支持自定义表格列配置
- 添加进度统计图表
- 支持导出为其他格式（Excel, CSV等）

### 2. 协作功能
- 支持多人同时编辑
- 添加评论和讨论功能
- 集成到项目管理工具

### 3. 数据分析
- 校对进度统计报告
- 工作量分析
- 质量指标追踪

## 总结

校对进度追踪功能为大型Mod汉化项目提供了一个强大而直观的进度管理工具。通过自动化生成、结构化展示和用户友好的交互设计，它能够显著提升汉化工作的效率和质量，为汉化者提供一个完整的项目管理解决方案。

该功能完全集成到现有的翻译工作流中，无需额外配置，在翻译完成后自动生成，为汉化者节省大量手动创建和管理进度表的时间。
