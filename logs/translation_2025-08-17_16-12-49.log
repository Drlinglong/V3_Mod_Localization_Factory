2025-08-17 16:12:49,728 - INFO - 日志系统初始化完成
2025-08-17 16:12:49,728 - INFO - 
请选择游戏:
2025-08-17 16:12:49,728 - INFO -   [1] Victoria 3 (维多利亚3)
2025-08-17 16:12:49,728 - INFO -   [2] Stellaris (群星)
2025-08-17 16:12:49,728 - INFO -   [3] Europa Universalis IV (欧陆风云4)
2025-08-17 16:12:49,728 - INFO -   [4] Hearts of Iron IV (钢铁雄心4)
2025-08-17 16:12:49,728 - INFO -   [5] Crusader Kings III (十字军之王3)
2025-08-17 16:13:15,408 - INFO - 请选择API供应商:
2025-08-17 16:13:15,408 - INFO -   [1] Gemini
2025-08-17 16:13:15,408 - INFO -   [2] Openai
2025-08-17 16:13:15,408 - INFO -   [3] Qwen - （中国大陆地区用户请用这个）
2025-08-17 16:13:16,827 - INFO - 请选择要汉化的Mod：
2025-08-17 16:13:16,827 - INFO -   [1] Australia & New Zealand Flavor Pack
2025-08-17 16:13:16,827 - INFO -   [2] Blue Archive
2025-08-17 16:13:16,827 - INFO -   [3] Blue Archive - test
2025-08-17 16:13:16,827 - INFO -   [4] Forts & Engineers
2025-08-17 16:13:16,827 - INFO -   [5] GORA UI
2025-08-17 16:13:16,827 - INFO -   [6] Hydra's More Agenda's
2025-08-17 16:13:16,827 - INFO -   [7] KuatAncientEmpire
2025-08-17 16:13:16,828 - INFO -   [8] MODJAM2025
2025-08-17 16:13:16,828 - INFO -   [9] Offer Convoy Contribution
2025-08-17 16:13:16,828 - INFO -   [10] parallelprocessor-test
2025-08-17 16:13:16,828 - INFO -   [11] Project Utopia - Extended Timeline - Technical Preview
2025-08-17 16:13:16,828 - INFO -   [12] Tech & Res
2025-08-17 16:13:16,828 - INFO -   [13] TEST-ANZAC
2025-08-17 16:13:16,828 - INFO -   [14] UKrework
2025-08-17 16:13:22,098 - INFO - 
你选择了: Offer Convoy Contribution
2025-08-17 16:13:22,099 - INFO - 是否要清理源MOD文件夹 'Offer Convoy Contribution' 以节省磁盘空间？
这将删除除 '.metadata', 'localization', 和 'thumbnail.png' 之外的所有文件。
请输入 Y 或 N: 
2025-08-17 16:13:27,212 - INFO - 已确认清理源文件
2025-08-17 16:13:27,212 - INFO - 
--- 正在获取Mod主题上下文 ---
2025-08-17 16:13:27,212 - INFO - 已识别Mod名称为: 'Offer Convoy Contribution'
2025-08-17 16:13:28,668 - INFO - 最终使用的主题上下文为: 'Offer Convoy Contribution'
2025-08-17 16:13:28,668 - INFO - 
请选择源语言:
2025-08-17 16:13:28,668 - INFO -   [1] English
2025-08-17 16:13:28,668 - INFO -   [2] 简体中文
2025-08-17 16:13:28,668 - INFO -   [3] Français
2025-08-17 16:13:28,668 - INFO -   [4] Deutsch
2025-08-17 16:13:28,668 - INFO -   [5] Español
2025-08-17 16:13:28,668 - INFO -   [6] 日本語
2025-08-17 16:13:28,668 - INFO -   [7] 한국어
2025-08-17 16:13:28,668 - INFO -   [8] Polski
2025-08-17 16:13:28,669 - INFO -   [9] Português do Brasil
2025-08-17 16:13:28,669 - INFO -   [10] Русский
2025-08-17 16:13:28,669 - INFO -   [11] Türkçe
2025-08-17 16:13:39,269 - INFO - 
请选择目标语言:
2025-08-17 16:13:39,269 - INFO -   [0] 翻译为其余所有10种语言
2025-08-17 16:13:39,269 - INFO -   [c] 自定义/套壳其他语言...
2025-08-17 16:13:39,269 - INFO -   [1] 简体中文
2025-08-17 16:13:39,270 - INFO -   [2] Français
2025-08-17 16:13:39,270 - INFO -   [3] Deutsch
2025-08-17 16:13:39,270 - INFO -   [4] Español
2025-08-17 16:13:39,270 - INFO -   [5] 日本語
2025-08-17 16:13:39,270 - INFO -   [6] 한국어
2025-08-17 16:13:39,270 - INFO -   [7] Polski
2025-08-17 16:13:39,270 - INFO -   [8] Português do Brasil
2025-08-17 16:13:39,270 - INFO -   [9] Русский
2025-08-17 16:13:39,270 - INFO -   [10] Türkçe
2025-08-17 16:13:40,664 - INFO - 词典加载成功: 743 条术语
2025-08-17 16:13:40,665 - INFO - 未找到外挂词典
2025-08-17 16:13:40,665 - INFO - 请选择术语模糊匹配模式:
2025-08-17 16:13:40,665 - INFO - [1] 严格模式 - 禁用模糊匹配 
2025-08-17 16:13:40,665 - INFO - [2] 宽松模式 - 启用模糊匹配 (容忍拼写错误)
2025-08-17 16:13:40,665 - INFO - 如果你不知道这是什么，建议你打开术语模糊匹配
2025-08-17 16:13:43,646 - INFO - === 工程总览 ===
2025-08-17 16:13:43,646 - INFO - 目标MOD: Offer Convoy Contribution
2025-08-17 16:13:43,647 - INFO - API供应商: Gemini
2025-08-17 16:13:43,647 - INFO - 游戏类型: Victoria 3 (维多利亚3)
2025-08-17 16:13:43,647 - INFO - 源语言: English
2025-08-17 16:13:43,647 - INFO - 目标语言: 简体中文
2025-08-17 16:13:43,647 - INFO - 词典配置: 仅主词典(743条)
2025-08-17 16:13:43,647 - INFO - 启用模糊匹配: 启用模糊匹配
2025-08-17 16:13:43,647 - INFO - 是否清理多余文件: 将清理源文件
2025-08-17 16:14:04,442 - INFO - 翻译已确认，开始执行...
2025-08-17 16:14:04,442 - INFO - 正在执行源文件清理...
2025-08-17 16:14:04,442 - INFO - 
--- 开始精简源Mod文件夹: Offer Convoy Contribution ---
2025-08-17 16:14:04,442 - INFO - 正在删除非必要文件和文件夹...
2025-08-17 16:14:04,442 - INFO - 源文件夹精简完成！
2025-08-17 16:14:04,442 - INFO - 源文件清理完成
2025-08-17 16:14:04,442 - INFO - 术语模糊匹配模式已设置为: 宽松模式
2025-08-17 16:14:04,442 - INFO - 词典状态: 仅主词典(743条)
2025-08-17 16:14:04,442 - INFO - 
--- 启动 '首次翻译' 工作流，目标: Offer Convoy Contribution ---
2025-08-17 16:14:04,902 - INFO - Gemini client initialized successfully, using model: gemini-2.5-flash
2025-08-17 16:14:04,902 - INFO - 词典加载成功: 743 条术语
2025-08-17 16:14:04,902 - INFO - 输出目录结构创建成功: J:\V3_Mod_Localization_Factory\my_translation\zh-CN-Offer Convoy Contribution
2025-08-17 16:14:04,902 - INFO - 
--- 正在处理资产文件 (封面图、描述文件等) ---
2025-08-17 16:14:04,904 - INFO - 资产文件 'thumbnail.png' 复制完成。
2025-08-17 16:14:04,904 - INFO - 
--- 正在解析文件: source_mod\Offer Convoy Contribution\localization\english\OCC_l_english.yml ---
2025-08-17 16:14:04,904 - INFO - 提取到 8 条可翻译文本。
2025-08-17 16:14:04,904 - INFO - 
--- 正在翻译为: 简体中文 ---
2025-08-17 16:14:04,905 - INFO - --- 检测到 1 个翻译批次，启动并行处理模式 ---
2025-08-17 16:14:05,402 - INFO - 从 8 个文本中提取到 5 个相关术语
2025-08-17 16:14:05,402 - INFO - 批次 1: 注入 5 个词典术语
2025-08-17 16:14:05,402 - ERROR - 处理批次时发生严重错误: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
Traceback (most recent call last):
  File "J:\V3_Mod_Localization_Factory\scripts\core\gemini_handler.py", line 164, in _translate_chunk
    model_name = API_PROVIDERS["gemini"]["default_model"]
                 ^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
2025-08-17 16:14:05,403 - WARNING - 第 1 批次在第 1/3 次尝试中失败。将在 2 秒后重试...
2025-08-17 16:14:07,901 - INFO - 从 8 个文本中提取到 5 个相关术语
2025-08-17 16:14:07,901 - INFO - 批次 1: 注入 5 个词典术语
2025-08-17 16:14:07,901 - ERROR - 处理批次时发生严重错误: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
Traceback (most recent call last):
  File "J:\V3_Mod_Localization_Factory\scripts\core\gemini_handler.py", line 164, in _translate_chunk
    model_name = API_PROVIDERS["gemini"]["default_model"]
                 ^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
2025-08-17 16:14:07,902 - WARNING - 第 1 批次在第 2/3 次尝试中失败。将在 4 秒后重试...
2025-08-17 16:14:12,400 - INFO - 从 8 个文本中提取到 5 个相关术语
2025-08-17 16:14:12,400 - INFO - 批次 1: 注入 5 个词典术语
2025-08-17 16:14:12,400 - ERROR - 处理批次时发生严重错误: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
Traceback (most recent call last):
  File "J:\V3_Mod_Localization_Factory\scripts\core\gemini_handler.py", line 164, in _translate_chunk
    model_name = API_PROVIDERS["gemini"]["default_model"]
                 ^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
2025-08-17 16:14:12,401 - INFO - 所有文件处理完成，共处理 0 个文件
2025-08-17 16:14:12,401 - INFO - 正在生成校对进度看板...
2025-08-17 16:14:12,401 - WARNING - 没有文件数据，无法生成校对进度表格
2025-08-17 16:14:12,401 - WARNING - 校对进度看板生成失败
2025-08-17 16:14:12,401 - INFO - 
--- 正在处理 metadata.json ---
2025-08-17 16:14:12,401 - INFO - 正在翻译 mod name: "Offer Convoy Contribution..."
2025-08-17 16:14:12,424 - INFO - 从 1 个文本中提取到 1 个相关术语
2025-08-17 16:14:12,424 - INFO - 单条翻译: 注入 1 个词典术语
2025-08-17 16:14:12,424 - ERROR - 处理批次时发生严重错误: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
Traceback (most recent call last):
  File "J:\V3_Mod_Localization_Factory\scripts\core\gemini_handler.py", line 79, in translate_single_text
    model_name = API_PROVIDERS["gemini"]["default_model"]
                 ^^^^^^^^^^^^^
UnboundLocalError: cannot access local variable 'API_PROVIDERS' where it is not associated with a value
2025-08-17 16:14:12,425 - INFO - metadata.json 汉化完成。
2025-08-17 16:14:12,425 - INFO - 翻译工作流完成！
2025-08-17 16:14:12,425 - INFO - 输出文件夹: zh-CN-Offer Convoy Contribution
2025-08-17 16:14:12,426 - INFO - 工作流完成！
