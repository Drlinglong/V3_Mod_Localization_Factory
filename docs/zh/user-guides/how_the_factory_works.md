# P社Mod本地化工厂：一次翻译之旅（最终修订版）

大家好！你是否好奇，当我们把一个全是英文的P社游戏Mod交给“本地化工厂”后，它究竟是如何摇身一变，成为我们熟悉的中文版本的？这个过程就像一个神奇的自动化工厂，充满了精密的工序。

这篇文档会像一个导游，带你参观这个工厂的流水线，看看一句句英文是如何被精准地翻译成中文的。我们尽量用最简单的方式来说明，让你即使不懂代码，也能明白其中的奥妙。

---

### 第一站：准备车间 (创建Mod框架)

在翻译开始前，工厂会先做好所有准备工作。它会创建一个全新的文件夹，这个文件夹就是我们最终汉化Mod的“家”。

1.  **建立目录结构**：工厂会按照P社游戏的标准，建好所有必需的子文件夹，比如 `localisation`、`metadata` 等。
2.  **复制非文本资源**：为了让Mod能直接使用，工厂会非常贴心地把原Mod的**封面图**（比如 `thumbnail.png`）和其他必要的资源文件，原封不动地复制到新创建的文件夹里。

做完这一步，一个完整的、待填充内容的汉化Mod框架就已经准备就绪了。

### 第二站：原料入库与拆解 (解析YML文件)

我们的“原料”就是Mod里的本地化文件，通常是`.yml`结尾。它们长这个样子：

```yml
some_event_title:0 "An Interesting Event"
some_event_description:0 "A long description about what is happening in this interesting event..."
```

这个文件就像一张任务清单。`some_event_title` 和 `some_event_description` 是每个任务的**唯一编号（我们叫它“键”或“Key”）**。而引号里的英文 `"An Interesting Event"` 则是需要处理的**具体内容（我们叫它“值”或“Value”）**。

工厂的第二步，就是把这份任务清单一张张拆开，精准地识别出哪个是编号（Key），哪个是需要翻译的内容（Value）。它会把这些信息小心翼翼地记录下来，确保后续工作不会弄混。

### 第三站：搬出“行话”宝典 (词典系统)

在翻译界，最怕的就是术语不统一。比如，游戏里的 `Infamy`，有的人翻译成“恶名”，有的人翻译成“骂名”。为了让整个游戏的体验保持一致，“本地化工厂”配备了一本非常严格的“行话”宝典——**词典（Glossary）**。

这本宝典里规定了所有核心术语的唯一标准译法，比如：

- `Infamy` -> `恶名`
- `Prestige` -> `威望`
- `Shogunate` -> `幕府`

在正式翻译前，工厂会把当前游戏对应的“行话”宝典准备好。这就像给翻译员发了一本必读手册，告诉他：“看到这些词，必须这么翻，不许即兴发挥！”

### 第四站：给AI写“小纸条” (五段式Prompt组装)

我们的主力翻译员是一位非常聪明的AI。但再聪明的AI，也需要清晰的指令。如果直接把 `"An Interesting Event"` 扔给它，它可能翻得不错，但未必“信、达、雅”，更可能会弄错P社游戏里那些复杂的格式。

所以，工厂里最核心的工序之一，就是给AI精心准备一张“小纸条”，也就是**指令（Prompt）**。这张“小纸条”是动态组装的，分为五个部分，确保万无一失：

1.  **第一段：角色扮演 (Role-playing)**
    我们首先要给AI“立个人设”，告诉它：“你是一位专业的《维多利亚3》游戏翻译家，精通19世纪历史和语言风格。” 这能让AI的翻译腔调更符合游戏背景。

2.  **第二段：核心任务 (Core Task)**
    简单直接地告诉AI要做什么：“请将我提供给你的文本列表，从英文翻译成简体中文。”

3.  **第三段：格式指令 (Formatting Rules)**
    这是技术性最强的一段，用非常严厉的口吻告诉AI必须遵守的格式规则。例如：“你的回复必须是一个不多不少、数量完全对应的JSON数组”、“不要给你翻译的词加上多余的引号”、“#BOLD 后面必须跟一个空格”等等。这些规则确保AI返回的结果能被程序正确读取。

4.  **第四段：游戏语法规则 (Game Syntax Rules)**
    P社游戏有大量特殊语法，比如 `[Concept('concept_key')]` 或 `[SCOPE.somenpc.GetFirstName]`。我们会在这部分详细告诉AI：“看到这些方括号包裹的、带句号和单引号的复杂代码，千万不要翻译它们！原样保留！”

5.  **第五段：词典术语 (Glossary Terms)**
    最后，我们会把第三站准备的“行话”宝典里，与当前待翻译文本相关的部分挑出来，作为最终指令附加给AI：“最后提醒，本次任务中，`Infamy` 必须翻译成 `恶名`，`Prestige` 必须翻译成 `威望`。”

通过这套“组合拳”，我们能最大程度地确保AI“戴着镣铐跳舞”，在发挥其强大翻译能力的同时，严格遵守我们的规范。

### 第五站：AI翻译与成品组装

AI翻译员拿到这份详尽的“小纸条”后，会迅速返回它的翻译成果。比如，它返回了 `“一个有趣的事件”`。

工厂拿到这个译文后，就会进行“成品组装”。它会找到之前记录的**唯一编号（Key）** `some_event_title`，然后把翻译好的中文填回去，组装成一个符合P社游戏格式的新的中文本地化文件：

```yml
l_simp_chinese:
 some_event_title:0 "一个有趣的事件"
 # ... 其他翻译好的条目
```

### 第六站：翻译Mod信息 (处理元数据)

一个完整的Mod包，除了游戏内的文本，还需要在启动器里显示的Mod名称和描述。工厂在翻译完所有游戏内文本后，会专门处理这些**元数据（Metadata）**。

它会再次调用AI，但这次会使用一个更简洁的、专门用于翻译短文本（如Mod标题）的指令，将 `.metadata` 文件中的 `name` 和 `description` 等字段也翻译成中文。这确保了你的汉化Mod从里到外都是完整的中文体验。

### 第七站：出厂前的最后质检 (验证器)

产品下线前，必须经过严格的质量检查！“本地化工厂”有两个“质检员”：

1.  **格式验证器**: 检查组装好的文件是不是完全符合P社的格式要求。比如，引号是不是正确闭合了？缩进是不是对齐了？这些细节一旦出错，游戏里就可能显示不出来。
2.  **词典验证器**: 再次检查一遍所有翻译好的中文，看看有没有漏网之鱼。比如，是不是不小心把 `Prestige` 翻译成了“声望”而不是词典里规定的“威望”？这个质检员会把所有不符合“行话”宝典的地方都标记出来。

只有通过了这两道严格质检的成品，才算是合格的汉化文件。

---

### 旅程结束

从创建Mod框架、复制封面图，到拆解原文、参考词典、精心指导AI，再到翻译元数据和最终质检，一个**可直接订阅使用**的完整汉化Mod包就这样诞生了。希望这次“工厂之旅”能帮助你理解我们的工作流程！这个过程虽然看起来复杂，但每一步都是为了确保最终的汉化质量能达到最高标准。
